function getRiskFieldsSmall(){var e=$.extend(true,{},defaultRiskFields);e.impact.visibility="hidden";e.date_identified.visibility="hidden";e.days_open.visibility="hidden";e.probability.visibility="hidden";e.impact_effect.visibility="hidden";e.cost_impact.visibility="hidden";e.overall_impact.visibility="hidden";e.urgent.visibility="hidden";e.priority_effect.visibility="hidden";e.impact_discussion.visibility="hidden";return e}function getResponseFieldsSmall(){var e=$.extend(true,{},defaultResponseFields);e.WBS.visibility="hidden";e.date_of_plan.visibility="hidden";e.action.visibility="hidden";e.risk_statement.visibility="hidden";e.date_of_update.visibility="hidden";e.planned_closure.visibility="hidden";e.current_status.visibility="hidden";return e}function getResponseChildTable(e){var t={title:"",width:"5%",sorting:false,edit:false,create:false,display:function(t){var n=$('<img src="'+config.base_url+'assets/images/expand_row-small.png" title="View Responses" style="height:30px;width:30px;cursor:pointer;" height="30" width="30"/>');n.click(function(){$("#"+e).jtable("openChildTable",n.closest("tr"),{title:t.record.event,actions:{listAction:config.base_url+"data_fetch/responses/"+t.record.risk_id,updateAction:config.base_url+"data_fetch/edit_response/"},messages:defaultResponseMessages,fields:getResponseFieldsSmall()},function(e){e.childTable.jtable("load")})});return n}};return t}function getLessonsLearnedResponseChildTable(e,t){var n={successful:{title:"Successful?",display:function(e){if(e.record.successful=="yes"){return"<div style='width:100%;text-align:center;'><input type='checkbox' checked='true' id='checkbox"+e.record.response_id+"' onclick='successful_checkbox_clicked("+e.record.response_id+", "+e.record.risk_id+");'></div>"}else if(e.record.successful=="no"||e.record.successful==""||e.record.successful=="not_identified"){return"<div style='width:100%;text-align:center;'><input type='checkbox' id='checkbox"+e.record.response_id+"' onclick='successful_checkbox_clicked("+e.record.response_id+", "+e.record.risk_id+");'></div>"}},width:"0%",columnResizable:false,sorting:false,edit:false,create:false}};n=$.extend(true,n,LessonsLearnedResponseFields);n.successful.width="0%";n.action_plan.width="35%";n.date_of_update.width="0%";n.release_progress.width="0%";n.cause.width="50%";var r={title:"",width:"5%",sorting:false,create:false,display:function(t){var r=$('<img src="'+config.base_url+'assets/images/expand_row-small.png" title="View Responses" class="row-opener" style="height:30px;width:30px;cursor:pointer;" height="30" width="30" id="response_img_'+t.record.risk_id+'"/>');r.click(function(){$("#"+e).jtable("openChildTable",r.closest("tr"),{title:t.record.event,actions:{listAction:config.base_url+"data_fetch/responses/"+t.record.risk_id,deleteAction:config.base_url+"data_fetch/delete_response/",updateAction:config.base_url+"data_fetch/update_lessons_learned_response/"},messages:defaultResponseMessages,fields:n,formSubmitting:function(e,t){$("select[name=cause]",t.form).attr("name","cause[]");return t}},function(e){e.childTable.jtable("load")})});return r}};return r}function getReportLessonsLearnedResponseChildTable(e,t){var n=$.extend(true,defaultResponseFields,LessonsLearnedResponseFields);n.WBS.visibility="hidden";n.risk_statement.visibility="hidden";n.date_of_plan.visibility="hidden";n.owner.visibility="hidden";n.action.visibility="hidden";n.cost.visibility="hidden";n.planned_closure.visibility="hidden";n.current_status.visibility="hidden";n.action_plan.width="45%";n.release_progress.width="5%";n.date_of_update.width="2%";n.successful.width="0%";n.cause.width="48%";n.action_plan.columnResizable=true;n.release_progress.columnResizable=true;n.date_of_update.columnResizable=true;n.successful.columnResizable=true;n.cause.columnResizable=true;var r={title:"",width:"5%",sorting:false,create:false,edit:false,display:function(t){var r=$('<img src="'+config.base_url+'assets/images/expand_row-small.png" title="View Responses" class="row-opener" style="height:30px;width:30px;cursor:pointer;" height="30" width="30" id="response_img_'+t.record.risk_id+'"/>');r.click(function(){$("#"+e).jtable("openChildTable",r.closest("tr"),{title:t.record.event,actions:{listAction:config.base_url+"data_fetch/responses/"+t.record.risk_id},messages:defaultResponseMessages,fields:n},function(e){e.childTable.jtable("load")})});return r}};return r}function getReportLessonsLearnedFullResponseChildTable(e,t){fields=$.extend(true,defaultResponseFields,LessonsLearnedResponseFields);var n={title:"",width:"5%",sorting:false,create:false,edit:false,display:function(t){var n=$('<img src="'+config.base_url+'assets/images/expand_row-small.png" title="View Responses" class="row-opener" style="height:30px;width:30px;cursor:pointer;" height="30" width="30" id="response_img_'+t.record.risk_id+'"/>');n.click(function(){$("#"+e).jtable("openChildTable",n.closest("tr"),{title:t.record.event,actions:{listAction:config.base_url+"data_fetch/responses/"+t.record.risk_id},messages:defaultResponseMessages,fields:fields},function(e){e.childTable.jtable("load")})});return n}};return n}function loadDashboardProjectTable(e){var t={listAction:config.base_url+"data_fetch/projects"};t.deleteAction=config.base_url+"data_fetch/delete_project";t.createAction=config.base_url+"data_fetch/create_project";t.updateAction=config.base_url+"data_fetch/edit_project";$("#"+e).jtable({title:"Projects",paging:true,pageSize:25,sorting:true,defaultSorting:"project_name ASC",actions:t,messages:defaultProjectMessages,fields:defaultProjectFields});$("#"+e).jtable("load")}function loadDashboardRiskTable(e,t,n,r){var i=$.extend(true,{project_name:defaultProjectFields.project_name,occurred:LessonsLearnedFields.occurred,cause:LessonsLearnedFields.cause},defaultRiskFields);i.project_name.width="10%";i.cause.width="22%";i.occurred.width="0%";i.WBS.width="0%";i.event.width="20%";i.date_of_concern.width="0%";i.impact.width="23%";i.probability.width="0%";i.overall_impact.width="0%";i.expected_cost.width="0%";i.priority_effect.width="0%";i.priority_monetary.width="0%";i.task_name.visibility="hidden";i.date_identified.visibility="hidden";i.days_open.visibility="hidden";i.date_closed.visibility="hidden";i.type.visibility="hidden";i.total_mitigation_cost.visibility="hidden";i.impact_effect.visibility="hidden";i.cost_impact.visibility="hidden";i.impact_discussion.visibility="hidden";i.urgent.visibility="hidden";delete i.project_name.linkURL;delete i.project_name.addKeyToURL;$("#"+e).jtable({title:"Risks",paging:true,pagesize:25,sorting:true,defaultSorting:"WBS ASC",actions:{listAction:config.base_url+"data_fetch/risks_by_user"},messages:defaultRiskMessages,fields:i,toolbar:{items:[{text:"Full Global Risk Report",click:function(){window.open(config.base_url+"global_risk_report","_blank")},cssClass:"toolbar-button button button-flat"},{text:"Global Risk Report",click:function(){window.open(config.base_url+"short_global_risk_report","_blank")},cssClass:"toolbar-button button button-flat"}]}});$("#"+t).click(function(t){t.preventDefault();$("#"+e).jtable("load",{filter_field:$("#"+n).val(),filter_value:$("#"+r).val()})});$("#"+t).click()}function loadViewProjectUpcomingRisksTable(e,t){var n=getRiskFieldsSmall();n.Responses=getResponseChildTable(e);$("#"+e).jtable({title:"Upcoming Risks",paging:false,sorting:false,actions:{listAction:config.base_url+"data_fetch/upcoming_risks/"+t},messages:defaultRiskMessages,fields:n});$("#"+e).jtable("load")}function loadViewProjectTopRisksTable(e,t){var n=getRiskFieldsSmall();n.Responses=getResponseChildTable(e);$("#TopRisksTableContainer").jtable({title:"Top Risks By Cost",paging:false,sorting:false,actions:{listAction:config.base_url+"data_fetch/top_risks/"+t},messages:defaultRiskMessages,fields:n});$("#"+e).jtable("load")}function loadViewProjectSevereRisksTable(e,t,n){var r=getRiskFieldsSmall();r.Responses=getResponseChildTable(e);$("#"+e).jtable({title:"Severe Risks",paging:n,pageSize:5,sorting:true,actions:{listAction:config.base_url+"data_fetch/severe_risks/"+t},messages:defaultRiskMessages,fields:r});$("#"+e).jtable("load")}function loadViewProjectAllRisksTable(e,t,n,r){var i=getRiskFieldsSmall();i.Responses=getResponseChildTable(e);var s;if(r===true){s={}}else{s={items:[{text:"View Full Report",click:function(){window.open(config.base_url+"project/risks_with_responses_report/"+t,"_blank")},cssClass:"toolbar-button button button-flat"}]}}$("#"+e).jtable({title:"All Risks",paging:n,pageSize:5,sorting:true,actions:{listAction:config.base_url+"data_fetch/risks_by_project/"+t},messages:defaultRiskMessages,fields:i,toolbar:s});$("#"+e).jtable("load")}function loadViewProjectTasksTable(e,t,n){var r={listAction:config.base_url+"data_fetch/tasks/"+t};if(n){r.deleteAction=config.base_url+"data_fetch/delete_task/";r.createAction=config.base_url+"data_fetch/create_task/"+t;r.updateAction=config.base_url+"data_fetch/edit_task/"}fields={has_risk:{title:"Risk?",display:function(e){if(parseInt(e.record.active_risks)>0||parseInt(e.record.closed_risks)>0)return"<div style='width:100%;text-align:center;'><input type='checkbox' checked disabled=true></div>";else return"<div style='width:100%;text-align:center;'><input type='checkbox' id='checkbox"+e.record.task_id+"' onclick='checkbox_clicked("+e.record.task_id+");'></div>"},width:"1%",columnResizable:false,sorting:false,edit:false,create:false}};fields=$.extend(true,fields,defaultTaskFields);var i={alpha_icon:{title:"",display:function(e){if(parseInt(e.record.active_risks)>0||parseInt(e.record.closed_risks)>0)return"<div style='width:100%;text-align:center;'><img src='"+config.base_url+"assets/images/ic_filter_tilt_shift_black_24dp.png' title='Click to indentify another risk for this task and edit it.' style='height: 20px; width: 20px; cursor: pointer;' onclick='alphaIcon_clicked_again("+e.record.task_id+")'></div>";else return"<div style='width:100%;text-align:center;'><img src='"+config.base_url+"assets/images/ic_adjust_black_24dp.png' title='Click to indentify risk and edit it.' style='height: 20px; width: 20px; cursor: pointer;' onclick='alphaIcon_clicked("+e.record.task_id+")'></div>"},width:"1%",columnResizable:false,sorting:false,edit:false,create:false}};fields=$.extend(true,fields,i);$("#"+e).jtable({title:"Tasks",paging:true,pageSize:100,sorting:true,defaultSorting:"WBS ASC",actions:r,messages:defaultTaskMessages,fields:fields});$("#"+e).jtable("load")}function loadViewProjectTasksWithRisksTable(e,t,n){var r={listAction:config.base_url+"data_fetch/tasks_with_risks/"+t};if(n){r.deleteAction=config.base_url+"data_fetch/delete_task/";r.updateAction=config.base_url+"data_fetch/edit_task/"}$("#"+e).jtable({title:"Tasks With Risks",paging:true,pageSize:100,sorting:true,defaultSorting:"WBS ASC",actions:r,toolbar:{items:[{text:"View Full Report",click:function(){window.open(config.base_url+"project/task_report/"+t,"_blank")},cssClass:"toolbar-button button button-flat"},{text:"View Report",click:function(){window.open(config.base_url+"project/short_task_report/"+t,"_blank")},cssClass:"toolbar-button button button-flat"},{text:"View PDF Report",click:function(){window.open(config.base_url+"project/short_task_pdf_report/"+t,"_blank")},cssClass:"toolbar-button button button-flat"}]},messages:defaultTaskMessages,fields:defaultTaskFields});$("#"+e).jtable("load")}function loadViewProjectRisksTable(e,t,n){var r={listAction:config.base_url+"data_fetch/risks_by_project/"+t};if(n){r.deleteAction=config.base_url+"data_fetch/delete_risk/";r.updateAction=config.base_url+"data_fetch/edit_risk/"}var i={FileUpload:{title:"Media",list:false,create:true,edit:true,input:function(e){return'<div id="FileUpload" name="FileUpload"></div>'}},Addtocal:{title:"Add Risk Event",create:false,edit:false,sorting:false,width:"1%",columnResizable:false,display:function(e){var t="";var n="";if(e.record.impact_discussion){t=e.record.impact_discussion}else{t="No Impact Discussion."}if(e.record.img_url){e.record.img_url.split(",").forEach(function(e){n+="http://v1.riskmp.com/assets/images/uploads/"+e+"\n"})}else{n="No Uploaded Media items."}var r='<link rel="stylesheet" type="text/css" href="http://v1.riskmp.com/assets/css/addthiseventicon.css">';var i="<script type='text/javascript' src='http://v1.riskmp.com/assets/js/pagelevel/addtocal.js'></script>";var s="<a href='' title='Add to Calendar' class='addthisevent'>";var o="<span class='_start'>"+e.record.date_of_concern+"</span>";var u='<span class="_end">'+e.record.date_of_concern+"</span>";var a='<span class="_zonecode">15</span>';var f='<span class="_summary">'+e.record.event+"</span>";var l="<span class='_description'> Impact Discussion: \n"+t+"\n Risk Media: \n"+n+"</span>";var c='<span class="_organizer">Me</span>';var h='<span class="_organizer_email"></span>';var p='<span class="_all_day_event">true</span>';var d='<span class="_date_format">DD/MM/YYYY</span>';var v="</a>";var m=i.concat(r,s,o,u,a,f,l,c,h,p,d,v);return m}},img_url:{title:"Media",list:true,create:false,edit:false,width:"1%",columnResizable:false,sorting:false,type:"link",linkURL:config.base_url+"assets/images/uploads",addKeyToURL:true,isMedia:true},timestamp_of_update:{title:"timestamp",sorting:true,edit:false,create:false,list:false,width:"0%",columnResizable:false},start_date:{title:"Task Start Date",type:"date",edit:false,create:false,list:false,columnResizable:false,width:"0%"}};var s=false;var o="";var u=[];i=$.extend(true,defaultRiskFields,i);i.date_of_update.visibility="hidden";i.date_identified.visibility="hidden";$("#"+e).jtable({title:"Risks",sorting:true,defaultSorting:"timestamp_of_update DESC",actions:r,messages:defaultRiskMessages,fields:i,toolbar:{items:[{text:"Full Risk Identification Report",click:function(){window.open(config.base_url+"project/risk_report/"+t,"_blank")},cssClass:"toolbar-button button button-flat"},{text:"Risk Identification Report",click:function(){window.open(config.base_url+"project/short_risk_report/"+t,"_blank")},cssClass:"toolbar-button button button-flat"},{text:"Risk Identification PDF Report",click:function(){window.open(config.base_url+"project/short_risk_pdf_report/"+t,"_blank")},cssClass:"toolbar-button button button-flat"}]},formCreated:function(e,t){if(t.record.start_date){i.date_of_concern.defaultValue=t.record.start_date}if(t.record.img_url&&t.record.img_url!==""){img_url_array=t.record.img_url.split(",");original_array_size=img_url_array.length}else{original_array_size=0}risk_id=t.record.risk_id;t.form.attr("enctype","multipart/form-data");$("#FileUpload").uploadFile({url:config.base_url+"assets/files/uploader.php",fileName:"file",maxFileCount:3,onSubmit:function(e){var t=false;var n=config.base_url+"assets/images/uploads/"+e;$.ajax({async:false,url:n,type:"HEAD",success:function(){t=true;alert("A file named: "+e+" already exists. Please rename your file and try again.");$("#FileUpload").stopUpload()},error:function(){t=false}});if(original_array_size>=3){if(confirm("3 media items already exist. Continuing with this upload will remove previous uploads!")){original_array_size=1}else{$("#FileUpload").stopUpload();alert("Upload cancelled.")}}else{original_array_size=original_array_size+1}if(/^[a-zA-Z0-9- ._]*$/.test(e)==false){alert("This file: "+e+" that you are trying to upload contains illegal characters in its name. Please rename the file and try again.");original_array_size=original_array_size-1;$("#FileUpload").stopUpload()}},onSuccess:function(e,t,n){s=true;u.push(e);u.forEach(function(e){console.log(e)});UploadedFile=t}})},formSubmitting:function(e,t){if(s){$("#FileUpload").html('<input type="text" id="img_name" name="img_url" value="'+u.join(",")+'"><input type="text" id="img_name_size" name="img_url_size" value="'+u.length+'">');console.log(u.join(","));u=[]}else{$("#FileUpload").html('<input type="text" id="img_name" name="img_url" value=""><input type="text" id="img_name_size" name="img_url_size" value="0">');u=[]}},rowsRemoved:function(e,t){$("#TasksWithRisksTableContainer").jtable("reload");$("#TaskTableContainer").jtable("reload")}});$("#"+e).jtable("load")}function loadViewProjectUsersTable(e,t){$("#"+e).jtable({title:"Users",paging:false,sorting:true,defaultSorting:"last_name ASC",messages:{addNewRecord:"Add User"},actions:{listAction:config.base_url+"data_fetch/project_users/"+t,deleteAction:config.base_url+"data_fetch/delete_project_user/"+t,createAction:config.base_url+"data_fetch/add_project_user/"+t},fields:{user_id:{key:true,list:false},username:{title:"Username",create:true,edit:false},first_name:{title:"First Name",create:false,edit:false},last_name:{title:"Last Name",create:false,edit:false},permission:{title:"Permission",edit:true,sort:false,options:{Read:"Read",Write:"Write",Admin:"Admin"},display:function(e){if(e.record)return e.record.permission}}}});$("#"+e).jtable("load")}function loadViewProjectResponsesTable(e,t,n){$("#"+e).jtable({title:"Responses",paging:true,pageSize:25,sorting:true,defaultSorting:"WBS ASC",actions:{listAction:config.base_url+"data_fetch/responses_by_project/"+t,deleteAction:config.base_url+"data_fetch/delete_response",updateAction:config.base_url+"data_fetch/edit_response"},messages:defaultResponseMessages,fields:defaultResponseFields,toolbar:{items:[{text:"Full Response Report",click:function(){window.open(config.base_url+"project/response_report/"+t,"_blank")},cssClass:"toolbar-button button button-flat"},{text:"Response Report",click:function(){window.open(config.base_url+"project/short_response_report/"+t,"_blank")},cssClass:"toolbar-button button button-flat"},{text:"Response PDF Report",click:function(){window.open(config.base_url+"project/short_response_pdf_report/"+t,"_blank")},cssClass:"toolbar-button button button-flat"}]}});$("#"+e).jtable("load")}function loadViewTaskRisksTable(e,t,n,r){var i={listAction:config.base_url+"data_fetch/risks_by_task/"+n};var s={};if(r){i.updateAction=config.base_url+"data_fetch/edit_risk";i.deleteAction=config.base_url+"data_fetch/delete_risk";i.createAction=config.base_url+"data_fetch/create_risk/"+n;s={items:[{text:"Risk Identification Wizard",click:function(){window.location.href=config.base_url+"risk/wizard/"+n},cssClass:"toolbar-button button button-flat"}]}}var o={img_url:{title:"Media",list:true,create:false,edit:false,width:"1%",columnResizable:false,sorting:false,type:"link",linkURL:config.base_url+"assets/images/uploads",addKeyToURL:true,isMedia:true},adder:{title:"Add Risk Event",create:false,edit:false,sorting:false,width:"1%",columnResizable:false,display:function(e){var t="";var n="";if(e.record.impact_discussion){t=e.record.impact_discussion}else{t="No Impact Discussion."}if(e.record.img_url){e.record.img_url.split(",").forEach(function(e){n+="http://v1.riskmp.com/assets/images/uploads/"+e+"\n"})}else{n="No Uploaded Media items."}var r='<link rel="stylesheet" type="text/css" href="http://v1.riskmp.com/assets/css/addthiseventicon.css">';var i="<script type='text/javascript' src='http://v1.riskmp.com/assets/js/pagelevel/addtocal.js'></script>";var s="<a href='' title='Add to Calendar' class='addthisevent'>";var o="<span class='_start'>"+e.record.date_of_concern+"</span>";var u='<span class="_end">'+e.record.date_of_concern+"</span>";var a='<span class="_zonecode">15</span>';var f='<span class="_summary">'+e.record.event+"</span>";var l="<span class='_description'> Impact Discussion: \n"+t+"\n Risk Media: \n"+n+"</span>";var c='<span class="_organizer">Me</span>';var h='<span class="_organizer_email"></span>';var p='<span class="_all_day_event">true</span>';var d='<span class="_date_format">DD/MM/YYYY</span>';var v="</a>";var m=i.concat(r,s,o,u,a,f,l,c,h,p,d,v);return m}}};o=$.extend(true,defaultRiskFields,o);if(e){o.date_of_concern.defaultValue=e}o.date_of_update.visibility="hidden";o.date_identified.visibility="hidden";$("#"+t).jtable({title:"Risks",paging:true,sorting:true,defaultSorting:"WBS ASC",actions:i,messages:defaultRiskMessages,fields:o,toolbar:s});$("#"+t).jtable("load")}function loadViewRiskResponsesTable(e,t,n){var r=$.extend(true,{},defaultResponseFields);r.risk_statement.visibility="hidden";r.WBS.visibility="hidden";var i={listAction:config.base_url+"data_fetch/responses/"+t};var s={};if(n){i.updateAction=config.base_url+"data_fetch/edit_response";i.deleteAction=config.base_url+"data_fetch/delete_response";i.createAction=config.base_url+"data_fetch/create_response/"+t;s={items:[{text:"Create New Response",click:function(){window.location.href=config.base_url+"response/create/"+t},cssClass:"toolbar-button button button-flat"}]}}$("#"+e).jtable({title:"Risk Responses",paging:true,sorting:true,defaultSorting:"WBS ASC",actions:i,messages:defaultResponseMessages,fields:r,toolbar:s,formSubmitting:function(e,t){location.reload()}});$("#"+e).jtable("load")}function loadViewResponseResponseUpdatesTable(e,t,n){var r={listAction:config.base_url+"data_fetch/response_updates/"+t};var i={};if(n){r.deleteAction=config.base_url+"data_fetch/delete_response_update";r.createAction=config.base_url+"data_fetch/create_response_update/"+t;i={items:[{text:"Create New Update",click:function(){window.location.href=config.base_url+"response/update/"+t},cssClass:"toolbar-button button button-flat"}]}}$("#"+e).jtable({title:"Response Tracking",paging:true,sorting:true,recordAdded:function(e,t){location.reload()},actions:r,messages:defaultResponseUpdateMessages,fields:defaultResponseUpdateFields,toolbar:i});$("#"+e).jtable("load")}function loadViewLessonsLearnedTable(e,t,n,r){var i={occurred:{title:"Occurred?",display:function(e){if(e.record.occurred=="yes")return"<div style='width:100%;text-align:center;'><input type='checkbox' checked='true' id='checkbox"+e.record.risk_id+"' onclick='occurred_checkbox_clicked("+e.record.risk_id+");'></div>";else if(e.record.occurred=="no"||e.record.occurred==""||e.record.occurred=="not_identified")return"<div style='width:100%;text-align:center;'><input type='checkbox' id='checkbox"+e.record.risk_id+"' onclick='occurred_checkbox_clicked("+e.record.risk_id+");'></div>"},width:"0%",columnResizable:false,edit:false,create:false}};i=$.extend(true,i,LessonsLearnedFields);i.Responses=getLessonsLearnedResponseChildTable(e,t);i.Responses.edit=false;i.date_closed.width="1%";i.date_of_update.width="1%";var s;if(r===true){s={}}else{s={items:[{text:"View PDF Report",click:function(){window.open(config.base_url+"project/lessons_learned_pdf_risk_report/"+t,"_blank")},cssClass:"toolbar-button button button-flat"},{text:"View Report",click:function(){window.open(config.base_url+"project/short_lessons_learned_report/"+t,"_blank")},cssClass:"toolbar-button button button-flat"},{text:"View Full Report",click:function(){window.open(config.base_url+"project/lessons_learned_report/"+t,"_blank")},cssClass:"toolbar-button button button-flat"}]}}$("#"+e).jtable({title:"Lessons Learned",paging:true,pageSize:100,sorting:true,defaultSorting:"WBS ASC",actions:{listAction:config.base_url+"data_fetch/risks_cause_by_project/"+t,deleteAction:config.base_url+"data_fetch/delete_risk/",updateAction:config.base_url+"data_fetch/update_lessons_learned_risk/"+t},messages:defaultRiskMessages,fields:i,formSubmitting:function(e,t){$("select[name=cause]",t.form).attr("name","cause[]");return t},toolbar:s});$("#"+e).jtable("load")}function loadProjectLessonsLearnedShortReportTable(e,t){var n=$.extend(true,defaultRiskFields,LessonsLearnedFields);n.Responses=getReportLessonsLearnedResponseChildTable(e,t);n.WBS.visibility="hidden";n.task_name.visibility="hidden";n.date_of_concern.visibility="hidden";n.impact.visibility="hidden";n.date_identified.visibility="hidden";n.type.visibility="hidden";n.total_mitigation_cost.visibility="hidden";n.impact_effect.visibility="hidden";n.cost_impact.visibility="hidden";n.overall_impact.visibility="hidden";n.expected_cost.visibility="hidden";n.impact_discussion.visibility="hidden";n.priority_effect.visibility="hidden";n.priority_monetary.visibility="hidden";n.urgent.visibility="hidden";n.cause.width="55%";n.occurred.width="0%";n.probability.width="0%";n.days_open.width="0%";n.event.width="45%";n.date_of_update.width="0%";n.cause.columnResizable=true;n.occurred.columnResizable=true;n.probability.columnResizable=true;n.days_open.columnResizable=true;n.event.columnResizable=true;n.date_of_update.columnResizable=true;$("#"+e).jtable({paging:false,sorting:true,defaultSorting:"WBS ASC",actions:{listAction:config.base_url+"data_fetch/risks_cause_by_project/"+t},messages:defaultRiskMessages,fields:n});$("#"+e).jtable("load")}function loadProjectLessonsLearnedReportTable(e,t){var n=$.extend(true,defaultRiskFields,LessonsLearnedFields);n.Responses=getReportLessonsLearnedFullResponseChildTable(e,t);$("#"+e).jtable({paging:false,sorting:true,defaultSorting:"WBS ASC",actions:{listAction:config.base_url+"data_fetch/risks_cause_by_project/"+t},messages:defaultRiskMessages,fields:n});$("#"+e).jtable("load")}function loadGlobalRisksReportTable(e){var t=$.extend(true,{project_name:defaultProjectFields.project_name,occurred:LessonsLearnedFields.occurred,cause:LessonsLearnedFields.cause},defaultRiskFields);t.cause.width="5%";t.occurred.width="0%";$("#"+e).jtable({paging:false,sorting:true,defaultSorting:"WBS ASC",actions:{listAction:config.base_url+"data_fetch/risks_by_user/"},messages:defaultRiskMessages,fields:t});$("#"+e).jtable("load")}function loadGlobalShortRisksReportTable(e){var t=$.extend(true,{project_name:defaultProjectFields.project_name,occurred:LessonsLearnedFields.occurred,cause:LessonsLearnedFields.cause},default_ShortRiskFields);t.cause.width="5%";t.occurred.width="0%";$("#"+e).jtable({paging:false,sorting:true,defaultSorting:"WBS ASC",actions:{listAction:config.base_url+"data_fetch/risks_by_user/"},messages:defaultRiskMessages,fields:t});$("#"+e).jtable("load")}function loadProjectShortResponsesReportTable(e,t){$("#"+e).jtable({paging:false,sorting:true,defaultSorting:"WBS ASC",actions:{listAction:config.base_url+"data_fetch/responses_by_project/"+t},messages:defaultResponseMessages,fields:defaultShortResponseFields});$("#"+e).jtable("load")}function loadProjectResponsesReportTable(e,t){$("#"+e).jtable({paging:false,sorting:true,defaultSorting:"WBS ASC",actions:{listAction:config.base_url+"data_fetch/responses_by_project/"+t},messages:defaultResponseMessages,fields:defaultResponseFields});$("#"+e).jtable("load")}function loadProjectRisksReportTable(e,t){var n=$.extend(true,{},defaultRiskFields);n.task_name.visibility="visible";$("#"+e).jtable({paging:false,sorting:true,defaultSorting:"WBS ASC",actions:{listAction:config.base_url+"data_fetch/risks_by_project/"+t},messages:defaultRiskMessages,fields:n});$("#"+e).jtable("load")}function loadProjectShortRisksReportTable(e,t){var n=$.extend(true,{},default_ShortRiskFields);n.task_name.visibility="visible";$("#"+e).jtable({paging:false,sorting:true,defaultSorting:"WBS ASC",actions:{listAction:config.base_url+"data_fetch/risks_by_project/"+t},messages:defaultRiskMessages,fields:default_ShortRiskFields});$("#"+e).jtable("load")}function loadProjectTasksReportTable(e,t){$("#"+e).jtable({paging:false,sorting:true,defaultSorting:"WBS ASC",addRecordButton:$("#create_task"),actions:{listAction:config.base_url+"data_fetch/tasks_with_risks/"+t},messages:defaultTaskMessages,fields:defaultTaskFields});$("#"+e).jtable("load")}function loadResponseTrackingReportTable(e,t){$("#"+e).jtable({paging:false,sorting:true,actions:{listAction:config.base_url+"data_fetch/response_updates/"+t},messages:defaultResponseUpdateMessages,fields:defaultResponseUpdateFields});$("#"+e).jtable("load")}function loadRiskAnalysisReportTable(e,t){var n=$.extend(true,{},defaultResponseFields);n.risk_statement.visibility="hidden";n.WBS.visibility="hidden";console.log(defaultResponseFields);$("#"+e).jtable({paging:false,sorting:true,defaultSorting:"WBS ASC",actions:{listAction:config.base_url+"data_fetch/responses/"+t},messages:defaultResponseMessages,fields:n});$("#"+e).jtable("load")}function loadInvoicesTable(e){$("#"+e).jtable({paging:false,sorting:false,actions:{listAction:config.base_url+"data_fetch/get_invoices"},messages:{loadingMessage:"Loading invoices...",noDataAvailable:"No invoices available."},fields:{transaction_id:{key:true,list:false},order_time:{title:"Date of Transaction",type:"link",linkURL:config.base_url+"user/receipt",addKeyToURL:true},amount:{title:"Amount",type:"currency"}}});$("#"+e).jtable("load")}defaultResponseMessages={loadingMessage:"Loading responses...",noDataAvailable:"There are no responses.",deleteConfirmation:"You are about to permanently delete this response. Are you sure?",pageSizeChangeLabel:"Responses per page",addNewRecord:"New Response",editRecord:"Edit Response"};defaultResponseFields={response_id:{key:true,list:false},WBS:{title:"WBS",create:false,maxlength:9,width:"0%",columnResizable:false,input:function(e){if(e.record){return'<input type="text" disabled="true" value="'+e.record.WBS+'"/>'}}},risk_statement:{title:"Risk Statement",create:false,edit:false,sorting:false,width:"40%"},date_of_plan:{title:"Date of Plan",type:"date",defaultValue:""+(new Date).getFullYear()+"-"+((new Date).getMonth()+1)+"-"+(new Date).getDate(),width:"0%",columnResizable:false},action_plan:{title:"Action Plan",type:"link",maxlength:250,linkURL:config.base_url+"response/view",addKeyToURL:true,width:"30%"},owner:{title:"Owner",maxlength:20,width:"0%",columnResizable:false},release_progress:{title:"Release Progress",options:{Planning:"Planning",Ongoing:"Ongoing",Complete:"Complete",Cancelled:"Cancelled"},width:"0%"},action:{title:"Action",options:{Pursue:"Pursue",Accept:"Accept",Mitigate:"Mitigate",Transfer:"Transfer",Avoid:"Avoid"},width:"0%"},cost:{title:"Cost",type:"currency",width:"0%",columnResizable:false},post_response:{title:"Post Response $",type:"currency",width:"0%",columnResizable:false},date_of_update:{title:"Date of Update",sorting:true,edit:false,create:false,type:"date",width:"0%",columnResizable:false},planned_closure:{title:"Planned Closure",type:"date",width:"0%"},current_status:{title:"Current Status",type:"textarea",maxlength:250,width:"30%"}};defaultShortResponseFields={response_id:{key:true,list:false},WBS:{title:"WBS",create:false,maxlength:9,width:"0%",columnResizable:false,visibility:"hidden",input:function(e){if(e.record){return'<input type="text" disabled="true" value="'+e.record.WBS+'"/>'}}},risk_statement:{title:"Risk Statement",create:false,edit:false,sorting:false,width:"40%"},date_of_plan:{title:"Date of Plan",type:"date",defaultValue:"2014-01-27",width:"0%",visibility:"hidden",columnResizable:false},action_plan:{title:"Action Plan",type:"link",maxlength:250,linkURL:config.base_url+"response/view",addKeyToURL:true,width:"30%"},owner:{title:"Owner",maxlength:20,width:"0%"},release_progress:{title:"Release Progress",options:{Planning:"Planning",Ongoing:"Ongoing",Complete:"Complete",Cancelled:"Cancelled"},width:"0%",visibility:"hidden"},action:{title:"Action",options:{Pursue:"Pursue",Accept:"Accept",Mitigate:"Mitigate",Transfer:"Transfer",Avoid:"Avoid"},width:"0%",visibility:"hidden"},cost:{title:"Cost",type:"currency",visibility:"hidden",width:"0%"},post_response:{title:"Post Response $",type:"currency",width:"0%",columnResizable:false},date_of_update:{title:"Date of Update",sorting:true,edit:false,create:false,type:"date",width:"0%",visibility:"hidden"},planned_closure:{title:"Planned Closure",type:"date",width:"0%"},current_status:{title:"Current Status",type:"textarea",maxlength:250,width:"30%"}};defaultTaskMessages={loadingMessage:"Loading tasks...",noDataAvailable:"There are no tasks for this project.",deleteConfirmation:"You are about to permanently delete this task including all associated risks and responses. Are you sure?",pageSizeChangeLabel:"Tasks per page",addNewRecord:"New Task",editRecord:"Edit Task"};defaultTaskFields={task_id:{key:true,list:false},WBS:{title:"WBS",visibility:"fixed",columnResizable:false,width:"0%"},task_name:{title:"Task Name",type:"link",linkURL:config.base_url+"task/view",addKeyToURL:true,width:"10%"},duration:{title:"Duration",displayPostfix:" days",inputPostfix:" days",type:"number",max:9999.99,min:0,step:.01,width:"0%"},work:{title:"Work",displayPostfix:" hours",inputPostfix:" hours",type:"number",max:99999,min:0,width:"0%"},start_date:{title:"Start Date",type:"date",columnResizable:false,width:"0%"},finish_date:{title:"Finish Date",type:"date",columnResizable:false,width:"0%"},fixed_cost:{title:"Fixed Cost",type:"currency",width:"0%"},cost:{title:"Cost",type:"currency",width:"0%"},price:{title:"Price",type:"currency",width:"0%"},resource_names:{title:"Resource Names",maxlength:250,width:"30%"},vendor:{title:"Supplier",maxlength:30,width:"0%"},active_risks:{list:false,edit:false,create:false,width:"30%"},closed_risks:{list:false,edit:false,create:false,width:"30%"}};defaultRiskMessages={loadingMessage:"Loading risks...",noDataAvailable:"There are no risks identified.",deleteConfirmation:"You are about to permanently delete this risk and all associated responses. Are you sure?",pageSizeChangeLabel:"Risks per page",addNewRecord:"New Risk",editRecord:"Edit Risk"};defaultRiskFields={risk_id:{key:true,list:false},WBS:{title:"WBS",visibility:"fixed",create:false,input:function(e){if(e.record)return'<input type="text" disabled="true" value="'+e.record.WBS+'"/>'},width:"0%",maxlength:14,columnResizable:false},task_name:{title:"Task Name",type:"link",create:false,width:"0%"},event:{title:"Risk Event",type:"link",maxlength:255,linkURL:config.base_url+"risk/view",addKeyToURL:true,width:"15%"},date_of_concern:{title:"Date of Concern",type:"date",width:"0%",maxlength:12,columnResizable:false},impact:{title:"Impact",type:"textarea",maxlength:250,width:"30%"},date_identified:{title:"Date Identified",type:"date",width:"0%",maxlength:12,columnResizable:false,defaultValue:""+(new Date).getFullYear()+"-"+((new Date).getMonth()+1)+"-"+(new Date).getDate()},days_open:{title:"Days Open",edit:false,create:false,width:"0%"},date_closed:{title:"Date Closed",type:"date",visibility:"hidden",width:"0%",maxlength:12},type:{title:"Type",options:{Threat:"Threat",Opportunity:"Opportunity"},visibility:"hidden",width:"0%"},total_mitigation_cost:{title:"Mitigation Cost",type:"currency",edit:false,create:false,visibility:"hidden",width:"0%"},probability:{title:"Probability",displayPostfix:"%",inputPostfix:"%",type:"number",max:100,min:0,width:"0%",columnResizable:false},impact_effect:{title:"Impact Effect",inputPostfix:" (0-100)",type:"number",max:100,min:0,width:"0%"},days_delay:{title:"Days Delay",displayPostfix:" days",inputPostfix:" days",type:"number",max:999999,min:-999999,step:1,width:"0%"},cost_impact:{title:"Cost Impact",type:"currency",width:"0%"},overall_impact:{title:"Overall Impact",edit:false,create:false,columnResizable:false,maxlength:7,width:"0%"},expected_cost:{title:"Expected Cost",edit:false,create:false,type:"currency",width:"0%",maxlength:14},expected_delay:{title:"Expected Delay",edit:false,create:false,type:"number",width:"0%",maxlength:14,displayPostfix:" days"},impact_discussion:{title:"Impact Discussion",type:"textarea",maxlength:250,width:"55%"},adjusted_cost:{title:"Adjusted Cost",edit:false,create:false,type:"currency",width:"0%",maxlength:14},priority_effect:{title:"Priority Effect",edit:false,create:false,width:"0%",columnResizable:false},priority_monetary:{title:"Priority ($)",edit:false,create:false,width:"0%",columnResizable:false},priority_days:{title:"Priority Days",edit:false,create:false,width:"0%",columnResizable:false},urgent:{title:"Severe?",options:{0:"No",1:"Yes"},width:"0%"},date_of_update:{title:"Date of Update",sorting:true,edit:false,create:false,type:"date",width:"0%",columnResizable:false,maxlength:14}};default_ShortRiskFields={risk_id:{key:true,list:false},WBS:{title:"WBS",visibility:"fixed",create:false,input:function(e){if(e.record)return'<input type="text" disabled="true" value="'+e.record.WBS+'"/>'},width:"0%",maxlength:14,columnResizable:false},task_name:{title:"Task Name",type:"link",create:false,visibility:"hidden",width:"0%"},event:{title:"Risk Event",type:"link",maxlength:255,linkURL:config.base_url+"risk/view",addKeyToURL:true,width:"15%"},date_of_concern:{title:"Date of Concern",type:"date",width:"0%",maxlength:12,columnResizable:false},impact:{title:"Impact",type:"textarea",maxlength:250,width:"30%"},date_identified:{title:"Date Identified",type:"date",width:"0%",visibility:"hidden",maxlength:12,defaultValue:""+(new Date).getFullYear()+"-"+((new Date).getMonth()+1)+"-"+(new Date).getDate()},days_open:{title:"Days Open",edit:false,create:false,width:"0%",visibility:"hidden"},date_closed:{title:"Date Closed",type:"date",visibility:"hidden",width:"0%",maxlength:12},type:{title:"Type",options:{Threat:"Threat",Opportunity:"Opportunity"},visibility:"hidden",width:"0%"},total_mitigation_cost:{title:"Mitigation Cost",type:"currency",edit:false,create:false,visibility:"hidden",width:"0%"},probability:{title:"Probability",displayPostfix:"%",inputPostfix:"%",type:"number",max:100,min:0,width:"0%",columnResizable:false},impact_effect:{title:"Impact Effect",inputPostfix:" (0-100)",type:"number",max:100,min:0,width:"0%",visibility:"hidden"},days_delay:{title:"Days Delay",displayPostfix:" days",inputPostfix:" days",type:"number",max:999999,min:-999999,step:1,width:"0%",visibility:"hidden"},cost_impact:{title:"Cost Impact",type:"currency",width:"0%",visibility:"hidden"},overall_impact:{title:"Overall Impact",edit:false,create:false,columnResizable:false,maxlength:7,width:"0%"},expected_cost:{title:"Expected Cost",edit:false,create:false,type:"currency",width:"0%",maxlength:14},expected_delay:{title:"Expected Delay",edit:false,create:false,type:"number",width:"0%",maxlength:14,displayPostfix:" days",visibility:"hidden"},impact_discussion:{title:"Impact Discussion",type:"textarea",visiblity:"hidden",maxlength:250,width:"55%",visibility:"hidden"},adjusted_cost:{title:"Adjusted Cost",edit:false,create:false,type:"currency",width:"0%",maxlength:14},priority_effect:{title:"Priority Effect",edit:false,create:false,width:"0%",columnResizable:false},priority_monetary:{title:"Priority ($)",edit:false,create:false,width:"0%",columnResizable:false},priority_days:{title:"Priority Days",edit:false,create:false,width:"0%",columnResizable:false,visibility:"hidden"},urgent:{title:"Severe?",options:{0:"No",1:"Yes"},width:"0%",visibility:"hidden"}};defaultResponseUpdateMessages={loadingMessage:"Loading response updates...",noDataAvailable:"There have been no updates to this response",deleteConfirmation:"You are about to permanently delete this response update. Are you sure?",pageSizeChangeLabel:"Items per page",editRecord:"Edit Update",addNewRecord:"New Update"};defaultResponseUpdateFields={response_update_id:{key:true,list:false},date_of_update:{title:"Date of Update",sorting:true,edit:false,create:false,type:"date",width:"0%",columnResizable:false,maxlength:14},owner:{title:"Owner",maxlength:20,width:"10%",columnResizable:false},release_progress:{title:"Release Progress",options:{Planning:"Planning",Ongoing:"Ongoing",Complete:"Complete",Cancelled:"Cancelled"},width:"10%",columnResizable:false,maxlength:11},planned_closure:{title:"Planned Closure",type:"date",width:"0%",columnResizable:false,maxlength:14},current_status:{title:"Current Status",maxlength:250,width:"10%"},cost:{title:"Cost",type:"currency",width:"0%",columnResizable:false,maxlength:10},post_response:{title:"Post Response $",type:"currency",width:"0%",columnResizable:false}};defaultProjectMessages={deleteConfirmation:"You are about to delete this project and all associated data. This cannot be undone. Are you sure?",loadingMessage:"Loading projects...",noDataAvailable:"There are no projects to display!",pageSizeChangeLabel:"Projects per page",editRecord:"Edit Project",addNewRecord:"New Project"};defaultProjectFields={project_id:{key:true,list:false},project_name:{title:"Project Name",type:"link",maxlength:255,linkURL:config.base_url+"project/view",addKeyToURL:true,width:"10%"},num_tasks:{title:"Tasks",edit:false,create:false,width:"10%"},active_risks:{title:"Active Risks",edit:false,create:false,width:"10%"},closed_risks:{title:"Closed Risks",edit:false,create:false,width:"10%"},total_expected_cost:{title:"Total Expected Cost",edit:false,create:false,type:"currency",width:"0%"},project_total_mitigation_cost:{title:"Total Mitigation Cost",edit:false,create:false,type:"currency",width:"0%"},date_modified:{title:"Last Updated",type:"date",edit:false,create:false,width:"0%"},last_modifier:{title:"Updated By",edit:false,create:false,width:"5%"},status:{title:"Status",edit:false,create:false,width:"10%"}};LessonsLearnedFields={risk_id:{key:true,list:false},occurred:{title:"Occurred",width:"0%",options:{yes:"Yes",no:"No"},edit:false,create:false},date_closed:{title:"Date Closed",type:"date",width:"3%",maxlength:12},probability:{title:"Probability",displayPostfix:"%",inputPostfix:"%",type:"number",max:100,min:0,width:"1%"},event:{title:"Risk Event",type:"link",maxlength:255,linkURL:config.base_url+"risk/view",addKeyToURL:true,width:"26%"},cause:{title:"Cause",type:"multiselectddl",width:"70%",options:{owner:"    Owner",architect:"    Architect",engineer:"    Engineer",sub_contractor:"    Sub Contractor",nature:"    Nature",supplier:"    Supplier",GC:"    GC",personnel:"    PERSONNEL",personnel_time:" Time",personnel_know_how:" Know How",personnel_communications:" Communications",personnel_authority:" Authority",personnel_desire:" Desire",process:"    PROCESS",process_time:" Time",process_resources:" Resources",process_technology:" Technology",process_customer:" Customer",process_management:" Management",not_identified:"    Not identified"}},date_of_update:{title:"Date of Update",sorting:true,edit:false,create:false,type:"date",width:"0%"},days_open:{title:"Days Open",edit:false,create:false,width:"0%"}};LessonsLearnedResponseFields={response_id:{key:true,list:false},successful:{title:"Successful",width:"0%",options:{yes:"Yes",no:"No"},edit:false,create:false},action_plan:{title:"Action Plan",type:"link",maxlength:250,linkURL:config.base_url+"response/view",addKeyToURL:true,width:"30%"},date_of_update:{title:"Date of Update",sorting:true,edit:false,create:false,type:"date",width:"0%"},release_progress:{title:"Release Progress",options:{Planning:"Planning",Ongoing:"Ongoing",Complete:"Complete",Cancelled:"Cancelled"},width:"0%"},cause:{title:"Cause",type:"multiselectddl",width:"70%",options:{owner:"    Owner",architect:"    Architect",engineer:"    Engineer",sub_contractor:"    Sub Contractor",nature:"    Nature",supplier:"    Supplier",GC:"    GC",personnel:"    PERSONNEL",personnel_time:" Time",personnel_know_how:" Know How",personnel_communications:" Communications",personnel_authority:" Authority",personnel_desire:" Desire",process:"    PROCESS",process_time:" Time",process_resources:" Resources",process_technology:" Technology",process_customer:" Customer",process_management:" Management",not_identified:"    Not identified"}}};defaultUserMessages={deleteConfirmation:"This user will no longer have access. This cannot be undone. Are you sure?",loadingMessage:"Loading users...",noDataAvailable:"There are no users to display!",pageSizeChangeLabel:"Users per page",editRecord:"Edit User",addNewRecord:"Create User"}
